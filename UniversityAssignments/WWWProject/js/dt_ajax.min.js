function ajax(o={}){if(!o.url)return;o.method=o.method||"GET";o.method=o.method.toUpperCase();o.async=o.async||!0;let x=new XMLHttpRequest();if(!o.header&&o.method=="POST"){o.header="application/x-www-form-urlencoded"}
x.onreadystatechange=function(){if(this.readyState==4){if(this.status==200){if(o.success)o.success(this)}else{if(o.error)o.error(this)}}};let url="";if(o.method=="GET"){url="?"}
if(o.data){for(let key in o.data){if(o.data.hasOwnProperty(key)){let v=o.data[key];url+=key+"="+v+"&"}}
if(url[url.length-1]=="&"){url.substr(0,-1)}}
if(o.method=="GET"){x.open(o.method,o.url+url,o.async);x.setRequestHeader("Content-type",o.header);x.send()}else{x.open(o.method,o.url,o.async);x.setRequestHeader("Content-type",o.header);x.send(url)}}